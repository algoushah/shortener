<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayoub - URL Shortener</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
        .dot { position: absolute; background: #111827; border-radius: 50%; pointer-events: none; transition: all 0.2s ease-out; }
    </style>
</head>
<body class="bg-white overflow-hidden">
    <div id="dots-container" class="fixed inset-0 pointer-events-none"></div>
    
    <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-2xl">
            <div class="text-center mb-12">
                <h1 class="text-7xl font-black text-gray-900 tracking-tight mb-6">Ayoub</h1>
                <h2 class="text-4xl font-bold text-gray-900 mb-3">URL Shortener</h2>
                <p class="text-lg text-gray-600">Make your links shorter, smarter, and easier to share</p>
            </div>

            <div class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-10 border border-gray-200">
                <div class="space-y-5">
                    <div>
                        <label for="url-input" class="block text-sm font-semibold text-gray-800 mb-3">Enter your long URL</label>
                        <input id="url-input" type="text" placeholder="https://example.com/very/long/url/here" 
                            class="w-full px-5 py-4 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition text-gray-900"/>
                    </div>
                    <div id="error-message" class="hidden bg-red-50 border-2 border-red-200 text-red-800 px-5 py-4 rounded-xl text-sm font-medium"></div>
                    <button id="shorten-btn" class="w-full bg-gray-900 hover:bg-gray-800 text-white font-semibold py-4 px-6 rounded-xl transition duration-300 shadow-lg">
                        âš¡ Shorten URL
                    </button>
                </div>

                <div id="result-section" class="hidden mt-8 pt-8 border-t-2 border-gray-200">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Your shortened URL:</h3>
                    <div class="bg-gray-50 rounded-xl p-5 border-2 border-gray-200">
                        <div class="flex items-center gap-3 mb-4">
                            <div id="short-url" class="flex-1 font-mono text-lg text-gray-900 break-all"></div>
                            <button id="copy-btn" class="flex-shrink-0 p-3 bg-white hover:bg-gray-100 border-2 border-gray-300 rounded-lg transition">ðŸ“‹</button>
                        </div>
                        <a id="test-link" href="#" target="_blank" class="inline-flex items-center gap-2 text-sm text-gray-900 hover:text-gray-700 transition font-medium">ðŸ”— Test link</a>
                    </div>
                    <p id="copied-message" class="hidden text-sm text-green-600 mt-3 font-medium">âœ“ Copied to clipboard!</p>
                </div>
            </div>

            <div class="mt-8 text-center text-sm text-gray-600">
                <p class="font-medium">ðŸ’¾ Links stored using TinyURL API</p>
            </div>
        </div>
    </div>

    <script>
        // Dots animation
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (e) => { mouseX = e.clientX; mouseY = e.clientY; updateDots(); });
        const dotsContainer = document.getElementById('dots-container');
        const dots = [];
        for (let i = 0; i < 50; i++) {
            const dot = document.createElement('div');
            dot.className = 'dot';
            const size = Math.random() * 4 + 2;
            dot.style.width = size + 'px';
            dot.style.height = size + 'px';
            dot.style.left = Math.random() * 100 + '%';
            dot.style.top = Math.random() * 100 + '%';
            dotsContainer.appendChild(dot);
            dots.push(dot);
        }
        function updateDots() {
            dots.forEach(dot => {
                const rect = dot.getBoundingClientRect();
                const dotX = rect.left + rect.width / 2, dotY = rect.top + rect.height / 2;
                const distance = Math.sqrt(Math.pow(mouseX - dotX, 2) + Math.pow(mouseY - dotY, 2));
                const influence = Math.max(0, 1 - distance / 200);
                const offsetX = (mouseX - dotX) * influence * 0.3, offsetY = (mouseY - dotY) * influence * 0.3;
                dot.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                dot.style.opacity = 0.4 + influence * 0.4;
            });
        }

        // URL Shortener using TinyURL API
        const urlInput = document.getElementById('url-input');
        const shortenBtn = document.getElementById('shorten-btn');
        const errorMessage = document.getElementById('error-message');
        const resultSection = document.getElementById('result-section');
        const shortUrlDiv = document.getElementById('short-url');
        const copyBtn = document.getElementById('copy-btn');
        const testLink = document.getElementById('test-link');
        const copiedMessage = document.getElementById('copied-message');

        function isValidUrl(string) {
            try { 
                const url = new URL(string); 
                return url.protocol === 'http:' || url.protocol === 'https:'; 
            } catch (_) { 
                return false; 
            }
        }

        shortenBtn.addEventListener('click', async () => {
            const longUrl = urlInput.value.trim();
            errorMessage.classList.add('hidden');
            resultSection.classList.add('hidden');

            if (!longUrl) {
                errorMessage.textContent = 'Please enter a URL';
                errorMessage.classList.remove('hidden');
                return;
            }
            if (!isValidUrl(longUrl)) {
                errorMessage.textContent = 'Please enter a valid URL (must start with http:// or https://)';
                errorMessage.classList.remove('hidden');
                return;
            }

            shortenBtn.textContent = 'â³ Shortening...';
            shortenBtn.disabled = true;

            try {
                // Using TinyURL API (free, no API key needed)
                const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`);
                const shortUrl = await response.text();
                
                if (shortUrl && shortUrl.startsWith('http')) {
                    shortUrlDiv.textContent = shortUrl;
                    testLink.href = shortUrl;
                    resultSection.classList.remove('hidden');
                } else {
                    errorMessage.textContent = 'Failed to shorten URL. Please try again.';
                    errorMessage.classList.remove('hidden');
                }
            } catch (error) {
                errorMessage.textContent = 'Error: Unable to connect to shortening service';
                errorMessage.classList.remove('hidden');
            } finally {
                shortenBtn.textContent = 'âš¡ Shorten URL';
                shortenBtn.disabled = false;
            }
        });

        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(shortUrlDiv.textContent).then(() => {
                copyBtn.textContent = 'âœ“';
                copiedMessage.classList.remove('hidden');
                setTimeout(() => { 
                    copyBtn.textContent = 'ðŸ“‹'; 
                    copiedMessage.classList.add('hidden'); 
                }, 2000);
            });
        });

        urlInput.addEventListener('keypress', (e) => { 
            if (e.key === 'Enter') shortenBtn.click(); 
        });
    </script>
</body>
</html>